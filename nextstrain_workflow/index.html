<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://CDPHE-bioinformatics.github.io/CDPHE-SARS-CoV-2/nextstrain_workflow/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Nextstrain Workflow - CDPHE-SARS-CoV-2</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Nextstrain Workflow";
        var mkdocs_page_input_path = "nextstrain_workflow.md";
        var mkdocs_page_url = "/CDPHE-SARS-CoV-2/nextstrain_workflow/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> CDPHE-SARS-CoV-2
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setup/">Setup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../indel_finder/">Indel Finder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../python_scripts/">Python Scripts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../assembly_workflow/">Assembly Workflows</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../transfer_workflow/">Transfer Workflows</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../results_workflow/">Results Workflows</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../wastewater_workflow/">Wastewater Workflow</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Nextstrain Workflow</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#inputs">Inputs</a>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">CDPHE-SARS-CoV-2</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Nextstrain Workflow</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="nextstrain-workflow">Nextstrain Workflow</h1>
<p>We use the publicly available <a href="https://dockstore.org/workflows/github.com/broadinstitute/viral-pipelines/sarscov2_nextstrain:master?tab=info">Nexstrain workflow</a> to generate Nextstrain builds, and then transfer the results using this transfer workflow.</p>
<p>This workflow transfers the output file generated from the publicly available <a href="https://dockstore.org/workflows/github.com/broadinstitute/viral-pipelines/sarscov2_nextstrain:master?tab=info">sarscov2_nextstrain workflow</a> to a user specified google bucket. Below is a summary of the workflow input variables along with the syntax used for the attribute column when setting up the workflow to run on Terra.bio. For the attributes, the "this.sample{terra_datatable_name}s." syntax refers Terra to pull the variable from the terra datatable as used for sample sets. The Google Bucket path describes where in the user google bucket the output file is transferred to.  </p>
<h2 id="inputs">Inputs</h2>
<table>
<thead>
<tr>
<th>workflow variable</th>
<th>attribute (input syntax into workflow)</th>
<th>google bucket path</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>auspice_input_json</code></td>
<td>this.auspice_input_json</td>
<td><code>gs://{user_defined_gcp_bucket}/auspice_input_json/</code></td>
</tr>
<tr>
<td><code>combined_assemblies</code></td>
<td>this.combined_assemblies</td>
<td><code>gs://{user_defined_gcp_bucket}/combined_assemblies/</code></td>
</tr>
<tr>
<td><code>keep_list</code></td>
<td>this.keep_list</td>
<td><code>gs://{user_defined_gcp_bucket}/keep_list/</code></td>
</tr>
<tr>
<td><code>metadata_merged</code></td>
<td>this.metadata</td>
<td><code>gs://{user_defined_gcp_bucket}/metadata_merged/</code></td>
</tr>
<tr>
<td><code>ml_tree</code></td>
<td>this.ml_tree</td>
<td><code>gs://{user_defined_gcp_bucket}/ml_tree/</code></td>
</tr>
<tr>
<td><code>multiple_alignment</code></td>
<td>this.multiple_alignment</td>
<td><code>gs://{user_defined_gcp_bucket}/multiple_alignment/</code></td>
</tr>
<tr>
<td><code>node_data_jsons</code></td>
<td>this.node_data_jsons</td>
<td><code>gs://{user_defined_gcp_bucket}/node_data_jsons/</code></td>
</tr>
<tr>
<td><code>root_sequence_json</code></td>
<td>this.root_sequence_json</td>
<td><code>gs://{user_defined_gcp_bucket}/root_sequence_json/</code></td>
</tr>
<tr>
<td><code>subsampled_sequences</code></td>
<td>this.subsampled_sequences</td>
<td><code>gs://{user_defined_gcp_bucket}/subsampled_sequences/</code></td>
</tr>
<tr>
<td><code>time_tree</code></td>
<td>this.time_tree</td>
<td><code>gs://{user_defined_gcp_bucket}/time_tree/</code></td>
</tr>
<tr>
<td><code>tip_frequencies_json</code></td>
<td>this.tip_frequencies_json</td>
<td><code>gs://{user_defined_gcp_bucket}/tip_frequencies_json/</code></td>
</tr>
<tr>
<td><code>unmasked_snps</code></td>
<td>this.unmasked_snps</td>
<td><code>gs://{user_defined_gcp_bucket}/unmasked_snps/</code></td>
</tr>
<tr>
<td><code>out_dir</code></td>
<td><code>gs://{user_defined_gcp_bucket}/assemblies/</code></td>
<td>NA</td>
</tr>
</tbody>
</table>
<p><img alt="SC2_nextstrain_transfer.wdl workflow diagram" src="img/SC2_nextstrain_transfer.png" /></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../wastewater_workflow/" class="btn btn-neutral float-left" title="Wastewater Workflow"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../wastewater_workflow/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
